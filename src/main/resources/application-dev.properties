# =============================================================================
# SPRING BOOT 3 LDAP CONFIGURATION FOR DOCKER CONTAINER
# =============================================================================

# Basic Spring LDAP Configuration
# =============================================================================
spring.ldap.urls=ldap://localhost:389
spring.ldap.base=dc=example,dc=org
spring.ldap.username=cn=admin,dc=example,dc=org
spring.ldap.password=admin

# Alternative for multiple LDAP servers (comma-separated)
# spring.ldap.urls=ldap://localhost:389,ldap://backup-server:389

# LDAP Connection Pool Settings
# =============================================================================
spring.ldap.pool.enabled=true
spring.ldap.pool.max-active=8
spring.ldap.pool.max-idle=8
spring.ldap.pool.min-idle=0
spring.ldap.pool.max-wait=-1

# LDAP Template Configuration
# =============================================================================
spring.ldap.template.ignore-partial-result-exception=true
spring.ldap.template.ignore-name-not-found-exception=true
spring.ldap.template.ignore-size-limit-exceeded-exception=true
spring.ldap.template.count-limit=1000
spring.ldap.template.time-limit=3000
spring.ldap.template.search-scope=subtree

# Security Configuration for LDAP Authentication
# =============================================================================
# User search configuration
app.ldap.user-search-base=ou=people
app.ldap.user-search-filter=(uid={0})
app.ldap.user-dn-pattern=uid={0},ou=people,dc=example,dc=org

# Group search configuration
app.ldap.group-search-base=ou=groups
app.ldap.group-search-filter=(member={0})
app.ldap.group-role-attribute=cn

# LDAP Attributes Mapping
# =============================================================================
app.ldap.user-attributes.username=uid
app.ldap.user-attributes.firstname=givenName
app.ldap.user-attributes.lastname=sn
app.ldap.user-attributes.email=mail
app.ldap.user-attributes.fullname=cn
app.ldap.user-attributes.department=departmentNumber
app.ldap.user-attributes.phone=telephoneNumber

# SSL/TLS Configuration (if using LDAPS)
# =============================================================================
# spring.ldap.urls=ldaps://localhost:636
# spring.ldap.embedded.validation.enabled=false
# server.ssl.trust-store=classpath:truststore.jks
# server.ssl.trust-store-password=changeit

# Connection Timeout Settings
# =============================================================================
spring.ldap.environment.com.sun.jndi.ldap.connect.timeout=5000
spring.ldap.environment.com.sun.jndi.ldap.read.timeout=10000

# LDAP Referral Handling
# =============================================================================
spring.ldap.environment.java.naming.referral=follow

# Custom LDAP Configuration Properties
# =============================================================================
# Base DNs for different organizational units
app.ldap.base-dn.users=ou=people,dc=example,dc=org
app.ldap.base-dn.groups=ou=groups,dc=example,dc=org
app.ldap.base-dn.roles=ou=roles,dc=example,dc=org

# LDAP Object Classes
app.ldap.objectclass.user=inetOrgPerson
app.ldap.objectclass.group=groupOfNames
app.ldap.objectclass.role=organizationalRole

# Docker-specific considerations
# =============================================================================
# If using Docker Compose with service names
# spring.ldap.urls=ldap://ldap-server:389

# If using Docker bridge network
# spring.ldap.urls=ldap://172.17.0.2:389

# Connection Validation
# =============================================================================
spring.ldap.pool.validation-query-timeout=3000
spring.ldap.pool.test-on-borrow=true
spring.ldap.pool.test-while-idle=true

# Logging Configuration for LDAP (Optional)
# =============================================================================
logging.level.org.springframework.ldap=DEBUG
logging.level.org.springframework.security.ldap=DEBUG
logging.level.root=INFO

# Application Specific LDAP Settings
# =============================================================================
# Enable/disable LDAP authentication
app.ldap.authentication.enabled=true

# LDAP sync settings
app.ldap.sync.enabled=true
app.ldap.sync.interval=3600000

# Default roles for LDAP users
app.ldap.default-roles=ROLE_USER

# Case sensitivity
app.ldap.case-sensitive=false

# Profile-specific configurations
# =============================================================================

# Development Profile
# -------------------
# spring.profiles.active=dev
# For development with Docker container on localhost

# Production Profile  
# ------------------
# spring.profiles.active=prod
# spring.ldap.urls=ldap://production-ldap-server:389
# spring.ldap.username=cn=service-account,ou=services,dc=company,dc=com

# Testing Profile
# ---------------
# spring.profiles.active=test
# spring.ldap.embedded.ldif=classpath:test-data.ldif
# spring.ldap.embedded.base-dn=dc=test,dc=org
# spring.ldap.embedded.port=8389

# =============================================================================
# ADDITIONAL SPRING BOOT 3 CONFIGURATION
# =============================================================================

# Server Configuration
server.port=8080

# Management endpoints (for health checks)
management.endpoints.web.exposure.include=health,info,ldap
management.endpoint.health.show-details=when-authorized

# DataSource (if using JPA alongside LDAP)
# spring.datasource.url=jdbc:h2:mem:testdb
# spring.jpa.hibernate.ddl-auto=update
